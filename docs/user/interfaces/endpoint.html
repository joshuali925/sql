<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Endpoint &#8212; sql-docs  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=12dfc556" />
    <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="endpoint">
<h1>Endpoint<a class="headerlink" href="#endpoint" title="Link to this heading">¶</a></h1>
<p class="rubric">Table of contents</p>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id5">Introduction</a></p></li>
<li><p><a class="reference internal" href="#post" id="id6">POST</a></p></li>
<li><p><a class="reference internal" href="#explain" id="id7">Explain</a></p></li>
<li><p><a class="reference internal" href="#cursor" id="id8">Cursor</a></p></li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>To send query request to SQL plugin, you MUST use HTTP POST request. POST request doesn’t have length limitation and allows for other parameters passed to plugin for other functionality such as prepared statement. And also the explain endpoint is used very often for query translation and troubleshooting.</p>
</section>
<section id="post">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">POST</a><a class="headerlink" href="#post" title="Link to this heading">¶</a></h2>
<section id="description">
<h3>Description<a class="headerlink" href="#description" title="Link to this heading">¶</a></h3>
<p>You can also send HTTP POST request with your query in request body.</p>
</section>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Link to this heading">¶</a></h3>
<p>SQL query:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt;&gt;<span class="w"> </span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s1">&#39;Content-Type: application/json&#39;</span><span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>localhost:9200/_plugins/_sql<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">  &quot;query&quot; : &quot;SELECT * FROM accounts&quot;</span>
<span class="s1">}&#39;</span>
</pre></div>
</div>
</section>
</section>
<section id="explain">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Explain</a><a class="headerlink" href="#explain" title="Link to this heading">¶</a></h2>
<section id="id1">
<h3>Description<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<p>To translate your query, send it to explain endpoint. The explain output is OpenSearch domain specific language (DSL) in JSON format. You can just copy and paste it to your console to run it against OpenSearch directly.</p>
</section>
<section id="id2">
<h3>Example<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<p>Explain query:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt;&gt;<span class="w"> </span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s1">&#39;Content-Type: application/json&#39;</span><span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>localhost:9200/_plugins/_sql/_explain<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">  &quot;query&quot; : &quot;SELECT firstname, lastname FROM accounts WHERE age &gt; 20&quot;</span>
<span class="s1">}&#39;</span>
</pre></div>
</div>
<p>Explain:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;from&quot;</span><span class="w"> </span>:<span class="w"> </span><span class="m">0</span>,
<span class="w">  </span><span class="s2">&quot;size&quot;</span><span class="w"> </span>:<span class="w"> </span><span class="m">200</span>,
<span class="w">  </span><span class="s2">&quot;query&quot;</span><span class="w"> </span>:<span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="s2">&quot;bool&quot;</span><span class="w"> </span>:<span class="w"> </span><span class="o">{</span>
<span class="w">      </span><span class="s2">&quot;filter&quot;</span><span class="w"> </span>:<span class="w"> </span><span class="o">[</span>
<span class="w">        </span><span class="o">{</span>
<span class="w">          </span><span class="s2">&quot;bool&quot;</span><span class="w"> </span>:<span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="s2">&quot;must&quot;</span><span class="w"> </span>:<span class="w"> </span><span class="o">[</span>
<span class="w">              </span><span class="o">{</span>
<span class="w">                </span><span class="s2">&quot;range&quot;</span><span class="w"> </span>:<span class="w"> </span><span class="o">{</span>
<span class="w">                  </span><span class="s2">&quot;age&quot;</span><span class="w"> </span>:<span class="w"> </span><span class="o">{</span>
<span class="w">                    </span><span class="s2">&quot;from&quot;</span><span class="w"> </span>:<span class="w"> </span><span class="m">20</span>,
<span class="w">                    </span><span class="s2">&quot;to&quot;</span><span class="w"> </span>:<span class="w"> </span>null,
<span class="w">                    </span><span class="s2">&quot;include_lower&quot;</span><span class="w"> </span>:<span class="w"> </span>false,
<span class="w">                    </span><span class="s2">&quot;include_upper&quot;</span><span class="w"> </span>:<span class="w"> </span>true,
<span class="w">                    </span><span class="s2">&quot;boost&quot;</span><span class="w"> </span>:<span class="w"> </span><span class="m">1</span>.0
<span class="w">                  </span><span class="o">}</span>
<span class="w">                </span><span class="o">}</span>
<span class="w">              </span><span class="o">}</span>
<span class="w">            </span><span class="o">]</span>,
<span class="w">            </span><span class="s2">&quot;adjust_pure_negative&quot;</span><span class="w"> </span>:<span class="w"> </span>true,
<span class="w">            </span><span class="s2">&quot;boost&quot;</span><span class="w"> </span>:<span class="w"> </span><span class="m">1</span>.0
<span class="w">          </span><span class="o">}</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">      </span><span class="o">]</span>,
<span class="w">      </span><span class="s2">&quot;adjust_pure_negative&quot;</span><span class="w"> </span>:<span class="w"> </span>true,
<span class="w">      </span><span class="s2">&quot;boost&quot;</span><span class="w"> </span>:<span class="w"> </span><span class="m">1</span>.0
<span class="w">    </span><span class="o">}</span>
<span class="w">  </span><span class="o">}</span>,
<span class="w">  </span><span class="s2">&quot;_source&quot;</span><span class="w"> </span>:<span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="s2">&quot;includes&quot;</span><span class="w"> </span>:<span class="w"> </span><span class="o">[</span>
<span class="w">      </span><span class="s2">&quot;firstname&quot;</span>,
<span class="w">      </span><span class="s2">&quot;lastname&quot;</span>
<span class="w">    </span><span class="o">]</span>,
<span class="w">    </span><span class="s2">&quot;excludes&quot;</span><span class="w"> </span>:<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="o">]</span>
<span class="w">  </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</section>
</section>
<section id="cursor">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Cursor</a><a class="headerlink" href="#cursor" title="Link to this heading">¶</a></h2>
<section id="id3">
<h3>Description<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<p>To get paginated response for a query, user needs to provide <cite>fetch_size</cite> parameter as part of normal query. The value of <cite>fetch_size</cite> should be greater than <cite>0</cite>. In absence of <cite>fetch_size</cite> or a value of <cite>0</cite>, it will fallback to non-paginated response. This feature is only available over <cite>jdbc</cite> format for now.</p>
</section>
<section id="id4">
<h3>Example<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<p>SQL query:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt;&gt;<span class="w"> </span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s1">&#39;Content-Type: application/json&#39;</span><span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>localhost:9200/_plugins/_sql<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">  &quot;fetch_size&quot; : 5,</span>
<span class="s1">  &quot;query&quot; : &quot;SELECT firstname, lastname FROM accounts WHERE age &gt; 20 ORDER BY state ASC&quot;</span>
<span class="s1">}&#39;</span>
</pre></div>
</div>
<p>Result set:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;schema&quot;</span>:<span class="w"> </span><span class="o">[</span>
<span class="w">    </span><span class="o">{</span>
<span class="w">      </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;firstname&quot;</span>,
<span class="w">      </span><span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="s2">&quot;text&quot;</span>
<span class="w">    </span><span class="o">}</span>,
<span class="w">    </span><span class="o">{</span>
<span class="w">      </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;lastname&quot;</span>,
<span class="w">      </span><span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="s2">&quot;text&quot;</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">  </span><span class="o">]</span>,
<span class="w">  </span><span class="s2">&quot;cursor&quot;</span>:<span class="w"> </span><span class="s2">&quot;d:eyJhIjp7fSwicyI6IkRYRjFaWEo1UVc1a1JtVjBZMmdCQUFBQUFBQUFBQU1XZWpkdFRFRkZUMlpTZEZkeFdsWnJkRlZoYnpaeVVRPT0iLCJjIjpbeyJuYW1lIjoiZmlyc3RuYW1lIiwidHlwZSI6InRleHQifSx7Im5hbWUiOiJsYXN0bmFtZSIsInR5cGUiOiJ0ZXh0In1dLCJmIjo1LCJpIjoiYWNjb3VudHMiLCJsIjo5NTF9&quot;</span>,
<span class="w">  </span><span class="s2">&quot;total&quot;</span>:<span class="w"> </span><span class="m">956</span>,
<span class="w">  </span><span class="s2">&quot;datarows&quot;</span>:<span class="w"> </span><span class="o">[</span>
<span class="w">    </span><span class="o">[</span>
<span class="w">      </span><span class="s2">&quot;Cherry&quot;</span>,
<span class="w">      </span><span class="s2">&quot;Carey&quot;</span>
<span class="w">    </span><span class="o">]</span>,
<span class="w">    </span><span class="o">[</span>
<span class="w">      </span><span class="s2">&quot;Lindsey&quot;</span>,
<span class="w">      </span><span class="s2">&quot;Hawkins&quot;</span>
<span class="w">    </span><span class="o">]</span>,
<span class="w">    </span><span class="o">[</span>
<span class="w">      </span><span class="s2">&quot;Sargent&quot;</span>,
<span class="w">      </span><span class="s2">&quot;Powers&quot;</span>
<span class="w">    </span><span class="o">]</span>,
<span class="w">    </span><span class="o">[</span>
<span class="w">      </span><span class="s2">&quot;Campos&quot;</span>,
<span class="w">      </span><span class="s2">&quot;Olsen&quot;</span>
<span class="w">    </span><span class="o">]</span>,
<span class="w">    </span><span class="o">[</span>
<span class="w">      </span><span class="s2">&quot;Savannah&quot;</span>,
<span class="w">      </span><span class="s2">&quot;Kirby&quot;</span>
<span class="w">    </span><span class="o">]</span>
<span class="w">  </span><span class="o">]</span>,
<span class="w">  </span><span class="s2">&quot;size&quot;</span>:<span class="w"> </span><span class="m">5</span>,
<span class="w">  </span><span class="s2">&quot;status&quot;</span>:<span class="w"> </span><span class="m">200</span>
<span class="o">}</span>
</pre></div>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">sql-docs</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, josh.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.3.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../../../_sources/docs/user/interfaces/endpoint.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
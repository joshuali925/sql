<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Endpoint &#8212; Example 0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=12dfc556" />
    <script src="../../../_static/documentation_options.js?v=2709fde1"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="endpoint">
<h1>Endpoint<a class="headerlink" href="#endpoint" title="Link to this heading">¶</a></h1>
<p class="rubric">Table of contents</p>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id3">Introduction</a></p></li>
<li><p><a class="reference internal" href="#post" id="id4">POST</a></p></li>
<li><p><a class="reference internal" href="#explain" id="id5">Explain</a></p></li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>To send query request to PPL plugin, you MUST use HTTP POST request. POST request doesn’t have length limitation and allows for other parameters passed to plugin for other functionality such as prepared statement. And also the explain endpoint is used very often for query translation and troubleshooting.</p>
</section>
<section id="post">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">POST</a><a class="headerlink" href="#post" title="Link to this heading">¶</a></h2>
<section id="description">
<h3>Description<a class="headerlink" href="#description" title="Link to this heading">¶</a></h3>
<p>You can send HTTP POST request to endpoint <strong>/_plugins/_ppl</strong> with your query in request body.</p>
</section>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Link to this heading">¶</a></h3>
<p>PPL query:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sh$<span class="w"> </span>curl<span class="w"> </span>-sS<span class="w"> </span>-H<span class="w"> </span><span class="s1">&#39;Content-Type: application/json&#39;</span><span class="w"> </span><span class="se">\</span>
...<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>localhost:9200/_plugins/_ppl<span class="w"> </span><span class="se">\</span>
...<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;query&quot; : &quot;source=accounts | fields firstname, lastname&quot;}&#39;</span>
<span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;schema&quot;</span>:<span class="w"> </span><span class="o">[</span>
<span class="w">    </span><span class="o">{</span>
<span class="w">      </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;firstname&quot;</span>,
<span class="w">      </span><span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">    </span><span class="o">}</span>,
<span class="w">    </span><span class="o">{</span>
<span class="w">      </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;lastname&quot;</span>,
<span class="w">      </span><span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">  </span><span class="o">]</span>,
<span class="w">  </span><span class="s2">&quot;datarows&quot;</span>:<span class="w"> </span><span class="o">[</span>
<span class="w">    </span><span class="o">[</span>
<span class="w">      </span><span class="s2">&quot;Amber&quot;</span>,
<span class="w">      </span><span class="s2">&quot;Duke&quot;</span>
<span class="w">    </span><span class="o">]</span>,
<span class="w">    </span><span class="o">[</span>
<span class="w">      </span><span class="s2">&quot;Hattie&quot;</span>,
<span class="w">      </span><span class="s2">&quot;Bond&quot;</span>
<span class="w">    </span><span class="o">]</span>,
<span class="w">    </span><span class="o">[</span>
<span class="w">      </span><span class="s2">&quot;Nanette&quot;</span>,
<span class="w">      </span><span class="s2">&quot;Bates&quot;</span>
<span class="w">    </span><span class="o">]</span>,
<span class="w">    </span><span class="o">[</span>
<span class="w">      </span><span class="s2">&quot;Dale&quot;</span>,
<span class="w">      </span><span class="s2">&quot;Adams&quot;</span>
<span class="w">    </span><span class="o">]</span>
<span class="w">  </span><span class="o">]</span>,
<span class="w">  </span><span class="s2">&quot;total&quot;</span>:<span class="w"> </span><span class="m">4</span>,
<span class="w">  </span><span class="s2">&quot;size&quot;</span>:<span class="w"> </span><span class="m">4</span>
<span class="o">}</span>
</pre></div>
</div>
</section>
</section>
<section id="explain">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Explain</a><a class="headerlink" href="#explain" title="Link to this heading">¶</a></h2>
<section id="id1">
<h3>Description<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<p>You can send HTTP explain request to endpoint <strong>/_plugins/_ppl/_explain</strong> with your query in request body to understand the execution plan for the PPL query. The explain endpoint is useful when user want to get insight how the query is executed in the engine.</p>
</section>
<section id="id2">
<h3>Example<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<p>The following PPL query demonstrated that where and stats command were pushed down to OpenSearch DSL aggregation query:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sh$<span class="w"> </span>curl<span class="w"> </span>-sS<span class="w"> </span>-H<span class="w"> </span><span class="s1">&#39;Content-Type: application/json&#39;</span><span class="w"> </span><span class="se">\</span>
...<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>localhost:9200/_plugins/_ppl/_explain<span class="w"> </span><span class="se">\</span>
...<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;query&quot; : &quot;source=accounts | where age &gt; 10 | stats avg(age)&quot;}&#39;</span>
<span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;root&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;ProjectOperator&quot;</span>,
<span class="w">    </span><span class="s2">&quot;description&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="w">      </span><span class="s2">&quot;fields&quot;</span>:<span class="w"> </span><span class="s2">&quot;[avg(age)]&quot;</span>
<span class="w">    </span><span class="o">}</span>,
<span class="w">    </span><span class="s2">&quot;children&quot;</span>:<span class="w"> </span><span class="o">[</span>
<span class="w">      </span><span class="o">{</span>
<span class="w">        </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;OpenSearchIndexScan&quot;</span>,
<span class="w">        </span><span class="s2">&quot;description&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="w">          </span><span class="s2">&quot;request&quot;</span>:<span class="w"> </span><span class="s2">&quot;OpenSearchQueryRequest(indexName=accounts, sourceBuilder={\&quot;from\&quot;:0,\&quot;size\&quot;:200,\&quot;timeout\&quot;:\&quot;1m\&quot;,\&quot;query\&quot;:{\&quot;range\&quot;:{\&quot;age\&quot;:{\&quot;from\&quot;:10,\&quot;to\&quot;:null,\&quot;include_lower\&quot;:false,\&quot;include_upper\&quot;:true,\&quot;boost\&quot;:1.0}}},\&quot;sort\&quot;:[{\&quot;_doc\&quot;:{\&quot;order\&quot;:\&quot;asc\&quot;}}],\&quot;aggregations\&quot;:{\&quot;avg(age)\&quot;:{\&quot;avg\&quot;:{\&quot;field\&quot;:\&quot;age\&quot;}}}}, searchDone=false)&quot;</span>
<span class="w">        </span><span class="o">}</span>,
<span class="w">        </span><span class="s2">&quot;children&quot;</span>:<span class="w"> </span><span class="o">[]</span>
<span class="w">      </span><span class="o">}</span>
<span class="w">    </span><span class="o">]</span>
<span class="w">  </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">Example</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;workshop participant.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.3.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../../../_sources/user/ppl/interfaces/endpoint.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>